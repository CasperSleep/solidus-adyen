---
http_interactions:
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Payment
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                            <payment:authorise xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com" xmlns:common="http://common.services.adyen.com">
                  <payment:paymentRequest>
                    <payment:merchantAccount><ADYEN_MERCHANT_ACCOUNT></payment:merchantAccount>
                    <payment:reference>R175314866</payment:reference>
                            <additionalAmount xmlns="http://payment.services.adyen.com" xsi:nil="true" />
                <additionalData xmlns="http://payment.services.adyen.com">
                  <entry>
                    <key xsi:type="xsd:string">card.encrypted.json</key>
                    <value xsi:type="xsd:string">adyenjs_0_1_17$Td0VrUMUk1aSpYMUHYJ0RlOTP7CN70em/u+94k9FWwR9dvM1ltlPiUM5Hq1ecxjzqnVnVvLTyp6R6LMALHvOPv3txRoRYKD0RsqXgUCICD1y/fA/J/3W1weR/ev1d/tkMMPDrpfzK4Ym+bu5fV3NjF18XxRCGaojTReImk5wVU4xgCHB+LD1kNc5kQHyUxTtV8nCgzUFRxAY4Kw5l4COIkmxcK1UU2N1bKlZPlyirkodJWLgWhW6KVTUNWEGfuK4i7JeX1sqr4uD5asYWP8PmItw4q7BcqWSykYKGuKEgamrIcQLUcNMum7o8f26O3wVuGyYGZtxg5Bh8twNNnLD$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</value>
                  </entry>
                </additionalData>
                <payment:recurring>
                  <payment:contract>RECURRING,ONECLICK</payment:contract>
                </payment:recurring>
                <payment:amount>
                  <common:currency>USD</common:currency>
                  <common:value>0</common:value>
                </payment:amount>
                <payment:shopperReference>1</payment:shopperReference>
                <payment:shopperEmail>spree@example.com</payment:shopperEmail>
                <payment:shopperIP></payment:shopperIP>
                <payment:shopperStatement>R175314866</payment:shopperStatement>
                  </payment:paymentRequest>
                </payment:authorise>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - authorise
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Apr 2016 18:24:59 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=77E639F9E7FC5D70ED28A5CD371F5C28.test3e; Path=/pal/; Secure; HttpOnly
      Last-Modified:
      - Sat, 30 Apr 2016 18:24:59 GMT
      Transfer-Encoding:
      - chunked
      Content-Type:
      - text/xml;charset=UTF-8
    body:
      encoding: UTF-8
      string: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><ns1:authoriseResponse
        xmlns:ns1="http://payment.services.adyen.com"><ns1:paymentResult><additionalData
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><authCode xmlns="http://payment.services.adyen.com">49583</authCode><dccAmount
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><dccSignature xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><fraudResult xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><issuerUrl xmlns="http://payment.services.adyen.com" xsi:nil="true" /><md
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><paRequest xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><pspReference xmlns="http://payment.services.adyen.com">8514620406992576</pspReference><refusalReason
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><resultCode xmlns="http://payment.services.adyen.com">Authorised</resultCode></ns1:paymentResult></ns1:authoriseResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Sat, 30 Apr 2016 18:24:59 GMT
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Recurring
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                        <recurring:listRecurringDetails xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com">
              <recurring:request>
                <recurring:recurring>
                  <payment:contract>RECURRING</payment:contract>
                </recurring:recurring>
                <recurring:merchantAccount><ADYEN_MERCHANT_ACCOUNT></recurring:merchantAccount>
                <recurring:shopperReference>1</recurring:shopperReference>
              </recurring:request>
            </recurring:listRecurringDetails>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - listRecurringDetails
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Apr 2016 18:24:59 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=42E201064ED30BDD170E71E85BF66328.test103e; Path=/pal/; Secure;
        HttpOnly
      Pspreference:
      - '8814620406992003'
      Content-Length:
      - '1728'
      Content-Type:
      - text/xml;charset=utf-8
    body:
      encoding: UTF-8
      string: <?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><recurring:listRecurringDetailsResponse
        xmlns:recurring="http://recurring.services.adyen.com"><recurring:result><creationDate
        xmlns="http://recurring.services.adyen.com">2016-04-28T14:18:41+02:00</creationDate><details
        xmlns="http://recurring.services.adyen.com"><RecurringDetail><bank xsi:nil="true"
        /><card><billingAddress xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><brand xmlns="http://payment.services.adyen.com" xsi:nil="true" /><cvc xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><expiryMonth xmlns="http://payment.services.adyen.com">6</expiryMonth><expiryYear
        xmlns="http://payment.services.adyen.com">2016</expiryYear><holderName xmlns="http://payment.services.adyen.com">John
        Doe</holderName><issueNumber xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><number xmlns="http://payment.services.adyen.com">1111</number><startMonth
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><startYear xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /></card><creationDate>2016-04-28T14:18:41+02:00</creationDate><elv
        xsi:nil="true" /><name xsi:nil="true" /><recurringDetailReference>8414618459219534</recurringDetailReference><variant>visa</variant></RecurringDetail></details><lastKnownShopperEmail
        xmlns="http://recurring.services.adyen.com">spree@example.com</lastKnownShopperEmail><shopperReference
        xmlns="http://recurring.services.adyen.com">1</shopperReference></recurring:result></recurring:listRecurringDetailsResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Sat, 30 Apr 2016 18:24:59 GMT
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Payment
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                            <payment:authorise xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com" xmlns:common="http://common.services.adyen.com">
                  <payment:paymentRequest>
                    <payment:merchantAccount><ADYEN_MERCHANT_ACCOUNT></payment:merchantAccount>
                    <payment:reference>R175314866-UD6W5BFK</payment:reference>
                            <payment:recurring>
                  <payment:contract>RECURRING</payment:contract>
                </payment:recurring>
                <payment:selectedRecurringDetailReference>8414618459219534</payment:selectedRecurringDetailReference>
                <payment:shopperInteraction>ContAuth</payment:shopperInteraction>
                <payment:amount>
                  <common:currency>USD</common:currency>
                  <common:value>2000</common:value>
                </payment:amount>
                <payment:shopperReference>1</payment:shopperReference>
                <payment:shopperEmail>spree@example.com</payment:shopperEmail>
                <payment:shopperIP></payment:shopperIP>
                <payment:shopperStatement>R175314866-UD6W5BFK</payment:shopperStatement><payment:captureDelayHours>0</payment:captureDelayHours>
                  </payment:paymentRequest>
                </payment:authorise>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - authorise
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Apr 2016 18:25:00 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=8ECE44969DD0464F945E7DE8F5154257.test104e; Path=/pal/; Secure;
        HttpOnly
      Last-Modified:
      - Sat, 30 Apr 2016 18:25:00 GMT
      Transfer-Encoding:
      - chunked
      Content-Type:
      - text/xml;charset=UTF-8
    body:
      encoding: UTF-8
      string: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><ns1:authoriseResponse
        xmlns:ns1="http://payment.services.adyen.com"><ns1:paymentResult><additionalData
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><authCode xmlns="http://payment.services.adyen.com">46890</authCode><dccAmount
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><dccSignature xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><fraudResult xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><issuerUrl xmlns="http://payment.services.adyen.com" xsi:nil="true" /><md
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><paRequest xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><pspReference xmlns="http://payment.services.adyen.com">7914620407002431</pspReference><refusalReason
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><resultCode xmlns="http://payment.services.adyen.com">Authorised</resultCode></ns1:paymentResult></ns1:authoriseResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Sat, 30 Apr 2016 18:25:00 GMT
recorded_with: VCR 3.0.1
