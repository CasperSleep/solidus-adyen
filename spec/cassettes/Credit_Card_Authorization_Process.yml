---
http_interactions:
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Payment
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                            <payment:authorise xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com" xmlns:common="http://common.services.adyen.com">
                  <payment:paymentRequest>
                    <payment:merchantAccount><ADYEN_MERCHANT_ACCOUNT></payment:merchantAccount>
                    <payment:reference>R385083935</payment:reference>
                            <additionalAmount xmlns="http://payment.services.adyen.com" xsi:nil="true" />
                <additionalData xmlns="http://payment.services.adyen.com">
                  <entry>
                    <key xsi:type="xsd:string">card.encrypted.json</key>
                    <value xsi:type="xsd:string">adyenjs_0_1_17$qgSIvj9faK/57uTYZZTVBpmxsOTBzJEN+YippwFZC85mnDAV7v0i1Vm0zL5/jReyFiPi+JCxB6j4q9Tf3DNY3EiGvKsIe1pkR/OsOPrRgGRwevTSNOaM99lrb3PJP9guj9C5FDYcykb7eEmUDKNpzTptIHwJdQK6Qx1EP6xWaq0o7PLe4StAg2GuRBDYlDagKzjgyn1WsR4UtBEExuTMQ8I9WLkIU5k5fB589oN3cWsref0B/1B3XLg/IsIs7nqJDwAsGD5uNpHl67LzR7AncBLIQOl1qSd6Y3YvIhgt31xcRM1lDM6j30zRIq4MbkMCy9YiiqjiWLf3QzUqkqYBnw==$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</value>
                  </entry>
                </additionalData>
                <payment:recurring>
                  <payment:contract>RECURRING,ONECLICK</payment:contract>
                </payment:recurring>
                <payment:amount>
                  <common:currency>USD</common:currency>
                  <common:value>0</common:value>
                </payment:amount>
                <payment:shopperReference>1</payment:shopperReference>
                <payment:shopperEmail>spree@example.com</payment:shopperEmail>
                <payment:shopperIP></payment:shopperIP>
                <payment:shopperStatement>R385083935</payment:shopperStatement>
                  </payment:paymentRequest>
                </payment:authorise>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - authorise
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Apr 2016 18:24:52 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=5F29DB7503718765A432E3E1DA178C31.test104e; Path=/pal/; Secure;
        HttpOnly
      Last-Modified:
      - Sat, 30 Apr 2016 18:24:52 GMT
      Transfer-Encoding:
      - chunked
      Content-Type:
      - text/xml;charset=UTF-8
    body:
      encoding: UTF-8
      string: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><ns1:authoriseResponse
        xmlns:ns1="http://payment.services.adyen.com"><ns1:paymentResult><additionalData
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><authCode xmlns="http://payment.services.adyen.com">36430</authCode><dccAmount
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><dccSignature xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><fraudResult xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><issuerUrl xmlns="http://payment.services.adyen.com" xsi:nil="true" /><md
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><paRequest xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><pspReference xmlns="http://payment.services.adyen.com">7914620406922316</pspReference><refusalReason
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><resultCode xmlns="http://payment.services.adyen.com">Authorised</resultCode></ns1:paymentResult></ns1:authoriseResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Sat, 30 Apr 2016 18:24:52 GMT
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Recurring
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                        <recurring:listRecurringDetails xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com">
              <recurring:request>
                <recurring:recurring>
                  <payment:contract>RECURRING</payment:contract>
                </recurring:recurring>
                <recurring:merchantAccount><ADYEN_MERCHANT_ACCOUNT></recurring:merchantAccount>
                <recurring:shopperReference>1</recurring:shopperReference>
              </recurring:request>
            </recurring:listRecurringDetails>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - listRecurringDetails
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Apr 2016 18:24:52 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=99F8D26E3F0EDDABBBB4332D79EC1754.test103e; Path=/pal/; Secure;
        HttpOnly
      Pspreference:
      - '8814620406921879'
      Content-Length:
      - '1728'
      Content-Type:
      - text/xml;charset=utf-8
    body:
      encoding: UTF-8
      string: <?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><recurring:listRecurringDetailsResponse
        xmlns:recurring="http://recurring.services.adyen.com"><recurring:result><creationDate
        xmlns="http://recurring.services.adyen.com">2016-04-28T14:18:41+02:00</creationDate><details
        xmlns="http://recurring.services.adyen.com"><RecurringDetail><bank xsi:nil="true"
        /><card><billingAddress xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><brand xmlns="http://payment.services.adyen.com" xsi:nil="true" /><cvc xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><expiryMonth xmlns="http://payment.services.adyen.com">6</expiryMonth><expiryYear
        xmlns="http://payment.services.adyen.com">2016</expiryYear><holderName xmlns="http://payment.services.adyen.com">John
        Doe</holderName><issueNumber xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><number xmlns="http://payment.services.adyen.com">1111</number><startMonth
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><startYear xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /></card><creationDate>2016-04-28T14:18:41+02:00</creationDate><elv
        xsi:nil="true" /><name xsi:nil="true" /><recurringDetailReference>8414618459219534</recurringDetailReference><variant>visa</variant></RecurringDetail></details><lastKnownShopperEmail
        xmlns="http://recurring.services.adyen.com">spree@example.com</lastKnownShopperEmail><shopperReference
        xmlns="http://recurring.services.adyen.com">1</shopperReference></recurring:result></recurring:listRecurringDetailsResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Sat, 30 Apr 2016 18:24:52 GMT
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Payment
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                            <payment:authorise xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com" xmlns:common="http://common.services.adyen.com">
                  <payment:paymentRequest>
                    <payment:merchantAccount><ADYEN_MERCHANT_ACCOUNT></payment:merchantAccount>
                    <payment:reference>R385083935-VHJ5VZ7B</payment:reference>
                            <payment:recurring>
                  <payment:contract>RECURRING</payment:contract>
                </payment:recurring>
                <payment:selectedRecurringDetailReference>8414618459219534</payment:selectedRecurringDetailReference>
                <payment:shopperInteraction>ContAuth</payment:shopperInteraction>
                <payment:amount>
                  <common:currency>USD</common:currency>
                  <common:value>2000</common:value>
                </payment:amount>
                <payment:shopperReference>1</payment:shopperReference>
                <payment:shopperEmail>spree@example.com</payment:shopperEmail>
                <payment:shopperIP></payment:shopperIP>
                <payment:shopperStatement>R385083935-VHJ5VZ7B</payment:shopperStatement>
                  </payment:paymentRequest>
                </payment:authorise>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - authorise
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Apr 2016 18:24:53 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=2002665D438A2F7C95C437B489D096CF.test4e; Path=/pal/; Secure; HttpOnly
      Last-Modified:
      - Sat, 30 Apr 2016 18:24:53 GMT
      Transfer-Encoding:
      - chunked
      Content-Type:
      - text/xml;charset=UTF-8
    body:
      encoding: UTF-8
      string: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><ns1:authoriseResponse
        xmlns:ns1="http://payment.services.adyen.com"><ns1:paymentResult><additionalData
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><authCode xmlns="http://payment.services.adyen.com">22071</authCode><dccAmount
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><dccSignature xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><fraudResult xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><issuerUrl xmlns="http://payment.services.adyen.com" xsi:nil="true" /><md
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><paRequest xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><pspReference xmlns="http://payment.services.adyen.com">8614620406933785</pspReference><refusalReason
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><resultCode xmlns="http://payment.services.adyen.com">Authorised</resultCode></ns1:paymentResult></ns1:authoriseResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Sat, 30 Apr 2016 18:24:53 GMT
recorded_with: VCR 3.0.1
